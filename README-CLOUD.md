# Руководство по облачному развертыванию

## Обзор

Данный документ описывает процесс развертывания клиентской части приложения "Умный дом" в облаке Netlify, в то время как серверная часть может оставаться локальной для прямого взаимодействия с устройствами.

## Архитектура решения

Это гибридная архитектура, где:

1. **Клиентская часть (Vue.js)** размещается в облаке Netlify
2. **Серверная часть (Node.js/Express)** работает локально в домашней сети
3. **Устройства умного дома** подключаются к локальному серверу

Такая архитектура позволяет:
- Получить доступ к интерфейсу приложения из любой точки мира
- Сохранить прямое взаимодействие с устройствами через локальный сервер
- Избежать необходимости открывать порты во внешний интернет

## Настройка режимов работы

Приложение поддерживает два режима работы:

### 1. Режим с подключением к локальному серверу

В этом режиме облачный интерфейс подключается к локальному серверу:
- Клиент должен быть в сети, где доступен сервер
- Требуется указать правильный IP-адрес или hostname сервера
- Все данные и команды передаются на реальный сервер

### 2. Демонстрационный режим

В этом режиме приложение работает без подключения к серверу:
- Используются демонстрационные данные
- Все действия эмулируются без реального взаимодействия с сервером
- Позволяет демонстрировать функциональность без реального сервера

Переключение между режимами осуществляется в разделе "Настройки сервера".

## Развертывание в Netlify

### Предварительные требования

1. Аккаунт на [Netlify](https://www.netlify.com/)
2. Git-репозиторий с клиентской частью приложения

### Шаги по развертыванию

1. Войдите в аккаунт Netlify
2. Нажмите кнопку "New site from Git"
3. Выберите провайдера Git (GitHub, GitLab, Bitbucket)
4. Выберите репозиторий с клиентской частью приложения
5. Настройки сборки уже определены в файле `netlify.toml`:
   - Команда сборки: `npm run build`
   - Публикуемая директория: `dist`
6. Нажмите "Deploy site"

### Настройка переменных окружения (опционально)

Если требуется предустановить URL сервера по умолчанию:

1. В панели управления сайтом на Netlify перейдите в раздел "Site settings" → "Build & deploy" → "Environment"
2. Добавьте переменную `VITE_DEFAULT_SERVER_URL` с URL вашего сервера

## Подключение к локальному серверу

1. После развертывания откройте сайт
2. Войдите в систему
3. Перейдите в раздел "Настройки сервера"
4. Введите адрес локального сервера (например, `http://192.168.1.100:3000`)
5. Нажмите "Проверить соединение" для проверки доступности сервера
6. Сохраните настройки

## Решение проблем

### Не удается подключиться к серверу

1. Убедитесь, что сервер запущен и доступен внутри сети
2. Проверьте правильность URL сервера
3. Убедитесь, что клиентское устройство находится в той же сети, что и сервер
4. Проверьте настройки брандмауэра и маршрутизатора

### Сервер недоступен вне домашней сети

По умолчанию предполагается, что доступ к серверу происходит только внутри домашней сети. Если требуется доступ извне:

1. Настройте проброс портов на маршрутизаторе
2. Рассмотрите возможность использования VPN для безопасного доступа к домашней сети
3. При необходимости настройте HTTPS на сервере для безопасной передачи данных

## Обновление приложения

Для обновления облачной версии приложения:

1. Внесите изменения в код
2. Зафиксируйте изменения в Git-репозитории
3. Отправьте изменения в удаленный репозиторий
4. Netlify автоматически обнаружит изменения и запустит процесс сборки и развертывания 